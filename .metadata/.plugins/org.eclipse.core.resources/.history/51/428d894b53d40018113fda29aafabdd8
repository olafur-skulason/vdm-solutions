class Location is subclass of Global
instance variables

private location_id : Location_ID;
private distance: nat1;
private gate : Gate := mk_Gate(<closed>);
private production : [Production] := nil

operations

public Location: Location_ID * nat1 ==> Location
Location(id, dist) == (
	location_id := id;
	distance := dist
	);

public commit_piece: Piece ==> ()
commit_piece(piece) ==
	production.committed_pieces := production.committed_pieces union {piece}
pre production <> nil;
	
public route_piece: Piece ==> ()
route_piece(piece) == (
	production.routed_pieces := production.routed_pieces union {piece};
	production.committed_pieces := production.committed_pieces \ {piece};
)
pre production <> nil and exists p in set production.committed_pieces & p = piece; 

public open_gate: () ==> ()
open_gate() == gate.state := <open>
pre gate.state = <closed>;

public close_gate: () ==> ()
close_gate() == gate.state := <closed>
pre gate.state = <open>;

public set_order: Order ==> ()
set_order(order) == (
	production.order := order
)
pre production.order = nil;

public sign_batch: () ==> ()
sign_batch() == is not yet specified
pre production <> nil
post production = nil;

public pure get_id: () ==> Location_ID
get_id() == return location_id;

public get_production: () ==> [Production]
get_production() == return production;

public set_production: Order ==> ()
set_production(order) == production := mk_Production({},{},false, order);


end Location
